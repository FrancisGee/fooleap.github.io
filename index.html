---
layout: default
js: true
scripts: ['/assets/js/jquery.timeago.min.js']
---
<section class="articles">
  <ul>
  {% for post in paginator.posts %}
    <li>
    {% if post.content contains site.IMG_PATH %}{% assign images = post.content | split:"<img " %}{% for image in images %}{% if image contains site.IMG_PATH %}{% if image contains 'imageView'%}{% assign thumbnail = image | split:"?imageView" | first | replace:'jpg',"jpg?imageView2/1/w/48/h/48/q/90" | replace:'png',"png?imageView2/1/w/48/h/48/q/90" |append:'"' %}{% else %}{% assign thumbnail = image | split:">" | first | remove:'_640' | replace:'jpg',"jpg?imageView2/1/w/48/h/48/q/90" | replace:'png',"png?imageView2/1/w/48/h/48/q/90" %}{% endif %}<img class="thumbnail" {{ thumbnail | split:' alt' | first }} alt="{{ post.title }}" />{% break %}{% endif %}{% endfor %}{% else %}<img class="thumbnail"  src="{{ site.IMG_PATH }}/avatar.jpg?imageView2/1/w/48/h/48/q/90" alt="{{ post.title }}" />{% endif %}
    <div class="comment-count"><a class="disqus-comment-count" title="查看评论" data-disqus-url="{{site.url }}{{ post.url }}" href="{{site.url }}{{ post.url }}#disqus_thread"></a></div>
    <div class="post-infos">
      <h3 class="post-title"><a href="{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a></h3>
      <abbr class="post-date timeago" title="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y 年 %m 月 %d 日" }}</abbr>
    </div>
    </li>
  {% endfor %}
  </ul>
</section>

<nav class="pagination">
  <ul>
    {% if paginator.next_page %}
    <li class="older"><a href="/page{{paginator.next_page}}">&laquo; 较旧文章</a></li>
    {% else %}
    {% endif %}
    <li class="number">{{paginator.page}} / {{paginator.total_pages}}</li>
    {% if paginator.previous_page %}
      {% if paginator.previous_page == 1 %}
    <li class="newer"><a href="/">较新文章 &raquo;</a></li>
      {% else %}
    <li class="newer"><a href="/page{{paginator.previous_page}}/">较新文章 &raquo;</a></li>
      {% endif %}
    {% else %}
    <li class="newer"></li>
    {% endif %}
  </ul>
</nav>
<!--<script>
  if($(document.body).width() < 360) {
      $('.comment-count').remove();
  } else {
    $(document).ready(function () {
      var disqus_publickey = "xDtZqWt790WMwHgxhIYxG3V9RzvPXzFYZ7izdWDQUiGQ1O3UaNg0ONto85Le7rYN";
      var disqus_shortname = "fooleap";
      var urlarray = [];
      $('.disqus-comment-count').each(function () {
        var url = $(this).attr('data-disqus-url');
        urlarray.push('link:' + url);
      });
      $.ajax({
        type: 'GET',
        url: "https://disqus.com/api/3.0/threads/set.jsonp",
        data: { api_key: disqus_publickey, forum : disqus_shortname, thread : urlarray }, 
        cache: false,
        dataType: "jsonp",
        success: function (result) {
          for (var i in result.response) {
            var count = result.response[i].posts;
            if ( count ) {
              $('.disqus-comment-count[data-disqus-url="' + result.response[i].link + '"]').html(count).fadeIn();
            }
          }
        }
      });
    });
  }
  </script>-->
